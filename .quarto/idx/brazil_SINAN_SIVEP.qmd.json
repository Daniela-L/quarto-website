{"title":"SIVEP_SINAN","markdown":{"yaml":{"title":"SIVEP_SINAN","author":"Daniela LÃ¼hrsen","date":"2024-10-15","output":"html_document"},"headingText":"Getting to know the Data","containsRefs":false,"markdown":"\n\n```{r setup, include=FALSE}\nknitr::opts_chunk$set(echo = TRUE)\n```\n\n\n### *Differences between datasets*\n\nFirst of all, it is important to note that, although the content of the data is always the same, the structure of data can differ depending on the selected year, on how one got the data and on when you obtain the data (since recent years can be updated retroactively after being published).\n\n```{r  Dengue_Load, message = FALSE, warning = FALSE}\n# den15 <- fetch_datasus(year_start = 2015, year_end = 2015, information_system = \"SINAN-DENGUE\")\n# den21 <- fetch_datasus(year_start = 2021, year_end = 2021, information_system = \"SINAN-DENGUE\")\nden15 <- readRDS(\"data/den15.rds\")\nden21 <- readRDS(\"data/den21.rds\")\n```\n\n### *Differences between two years*\n\nComparing the two datasets downloaded via microdatasus, from years 2015 and 2021, the first is to check whether there are different columns.\n\n```{r Dengue_Differentyears}\n# compare number of cases\nif (nrow(den21) == nrow(den15)){\n  print(\"Both datasets have the same number of cases.\")\n} else{\n  print(paste0(\"These documents have different number of cases, the 2021 dataset has \",\n               nrow(den21), \" cases, while the 2015 dataset has \",\n               nrow(den15),\" cases.\"))\n}\n\n# compare variables names\nif (identical(colnames(den15), colnames(den21))){\n  print(\"Both datsets contain the same columns.\")\n} else{\n  print(paste0(\"The columns that are different are: \",\n               paste(c(setdiff(colnames(den15), colnames(den21)),\n                       setdiff(colnames(den21), colnames(den15))), collapse=\", \")))\n}\n\n# Get unique column names from both data frames\nall_columns <- unique(c(names(den15), names(den21)))\n\n# Function to calculate the proportion of NA values in a column\nna_proportion <- function(col) {\n  round(mean(is.na(col))*100,2)\n}\n\n# Apply the function to each column of the data frames\nden15_na <- sapply(all_columns,\n                 function(col) ifelse(col %in% names(den15),\n                                      na_proportion(den15[[col]]),\n                                      NA))\nden21_na <- sapply(all_columns,\n                 function(col) ifelse(col %in% names(den21),\n                                      na_proportion(den21[[col]]),\n                                      NA))\n\n# Combine the results into a new data frame\nknitr::kable(data.frame(column = all_columns, den15 = den15_na,den21 = den21_na)[24:29,])\n```\n\nFor most variables, the amount of missing values stays similar. However, in the cases of rows 24-44, which coincide with the symptoms, it is noticeable that in 2015 all values are missing, while 98% of the cases in 2021 filled out this variable. This indicates that the variable may have not existed in 2015. It is possible to find two dengue dictionary database version around 2015. One version comes from [2010](https://www.saude.go.gov.br/images/imagens_migradas/upload/arquivos/2013-08/dengue2.pdf) and the other, [2015](http://www.portalsinan.saude.gov.br/images/documentos/Agravos/Dengue/DIC_DADOS_ONLINE.pdf). In the first one, the symptoms variables are not there.\n\n### *Differences between two datasets obtained differently*\n\nAccessing data for the same year, even from the same organization, but via a different method can also lead to a different dataset. Here, the dataset was requested directly via the [e-SIC platform](https://www.gov.br/acessoainformacao/pt-br). <!-- Double check this -->\n\nThe following code cannot be reproduced.\n\n```{r Dengue_loaddbf, echo=FALSE, eval=FALSE}\nden15_dbf <- read.dbf(\"Data/Disease/Dengue/DENGUE_2015.dbf\", as.is=TRUE)\n```\n\nThe two data sets have different number of variables, below a dataframe showcasing the variables that only appear in one of them: There are the same number of registers but differences between the variables.\n\nIf we compare the requested and the downloaded database for the same year?\n\n```{r  Dengue_DifferentMethod, eval=FALSE}\n# compare number of cases\nif (nrow(den15_dbf) == nrow(den15)){\n  print(\"Both datasets have the same number of cases.\")\n} else{\n  print(paste0(\"These documents have different number of cases, the one obtained by ... has\",\n               nrow(den15_dbf), \" cases, while the dataset obtained by microdatasus has \",\n               nrow(den15),\" cases.\"))\n}\n\n# compare variables names\nif (identical(colnames(den15_dbf), colnames(den15))){\n  print(\"Both datsets contain the same columns.\")\n} else{\n  print(paste0(\"The columns that are different are: \",\n               paste(c(setdiff(colnames(den15), colnames(den15_dbf)),\n                       setdiff(colnames(den15_dbf), colnames(den15))), collapse=\", \")))\n}\n\n# Get unique column names from both data frames\nall_columns <- unique(c(names(den15), names(den15_dbf)))\n\n# Function to calculate the proportion of NA values in a column\nna_proportion <- function(col) {\n  round(mean(is.na(col))*100,2)\n}\n\n# Apply the function to each column of the data frames\nden15_na <- sapply(all_columns,\n                 function(col) ifelse(col %in% names(den15),\n                                      na_proportion(den15[[col]]),\n                                      NA))\nden15_dbf_na <- sapply(all_columns,\n                 function(col) ifelse(col %in% names(den15_dbf),\n                                      na_proportion(den15_dbf[[col]]),\n                                      NA))\n\n# Combine the results into a new data frame\nknitr::kable(data.frame(column = all_columns, den15 = den15_na,den15_dbf = den15_dbf_na)[1:10,])\n```\n\n### *Difference depending on when you obtained the data*\n\nNow, lets compare data from the same source for the same year but obtained at different moments in time.\n\n```{r Dengue_DifferentObtainingtime, eval=FALSE}\ndengue21 <- read.dbc(\"Data/Disease/Dengue/DENGBR21.dbc\")\ndengue21_old <- read.dbc(\"Data/Disease/Dengue/DENGBR21_old.dbc\")\n\n# compare number of cases\nif (nrow(dengue21) == nrow(dengue21_old)){\n  print(\"Both datasets have the same number of cases.\")\n} else{\n  print(paste0(\"These documents have different number of cases, the new 2021 dataset has \",\n               nrow(dengue21), \" cases, while the old 2021 dataset has \",\n               nrow(dengue21_old),\" cases.\"))\n}\n\n# compare variables names\nif (identical(colnames(dengue21), colnames(dengue21_old))){\n  print(\"Both datsets contain the same columns.\")\n} else{\n  print(paste0(\"The columns that are different are: \",\n               paste(c(setdiff(colnames(dengue21), colnames(dengue21_old)),\n                       setdiff(colnames(dengue21_old), colnames(dengue21))), collapse=\", \")))\n}\n\n# Get unique column names from both data frames\nall_columns <- unique(c(names(dengue21), names(dengue21_old)))\n\n# Function to calculate the proportion of NA values in a column\nna_proportion <- function(col) {\n  round(mean(is.na(col))*100,2)\n}\n\n# Apply the function to each column of the data frames\ndengue21_na <- sapply(all_columns,\n                 function(col) ifelse(col %in% names(dengue21),\n                                      na_proportion(dengue21[[col]]),\n                                      NA))\ndengue21_old_na <- sapply(all_columns,\n                 function(col) ifelse(col %in% names(dengue21_old),\n                                      na_proportion(dengue21_old[[col]]),\n                                      NA))\n\n# Combine the results into a new data frame\nknitr::kable(data.frame(column = all_columns, dengue21 = dengue21_na,dengue21_old = dengue21_old_na)[65:70,])\n```\n\nIn general the count of NAs throughout the data set is similar, however in rows 66-69, corresponding to the probable areas of infection, the amount changes. In the \"old\" data, there is data registered, however in the newer version this data was removed.\n","srcMarkdownNoYaml":"\n\n```{r setup, include=FALSE}\nknitr::opts_chunk$set(echo = TRUE)\n```\n\n# Getting to know the Data\n\n### *Differences between datasets*\n\nFirst of all, it is important to note that, although the content of the data is always the same, the structure of data can differ depending on the selected year, on how one got the data and on when you obtain the data (since recent years can be updated retroactively after being published).\n\n```{r  Dengue_Load, message = FALSE, warning = FALSE}\n# den15 <- fetch_datasus(year_start = 2015, year_end = 2015, information_system = \"SINAN-DENGUE\")\n# den21 <- fetch_datasus(year_start = 2021, year_end = 2021, information_system = \"SINAN-DENGUE\")\nden15 <- readRDS(\"data/den15.rds\")\nden21 <- readRDS(\"data/den21.rds\")\n```\n\n### *Differences between two years*\n\nComparing the two datasets downloaded via microdatasus, from years 2015 and 2021, the first is to check whether there are different columns.\n\n```{r Dengue_Differentyears}\n# compare number of cases\nif (nrow(den21) == nrow(den15)){\n  print(\"Both datasets have the same number of cases.\")\n} else{\n  print(paste0(\"These documents have different number of cases, the 2021 dataset has \",\n               nrow(den21), \" cases, while the 2015 dataset has \",\n               nrow(den15),\" cases.\"))\n}\n\n# compare variables names\nif (identical(colnames(den15), colnames(den21))){\n  print(\"Both datsets contain the same columns.\")\n} else{\n  print(paste0(\"The columns that are different are: \",\n               paste(c(setdiff(colnames(den15), colnames(den21)),\n                       setdiff(colnames(den21), colnames(den15))), collapse=\", \")))\n}\n\n# Get unique column names from both data frames\nall_columns <- unique(c(names(den15), names(den21)))\n\n# Function to calculate the proportion of NA values in a column\nna_proportion <- function(col) {\n  round(mean(is.na(col))*100,2)\n}\n\n# Apply the function to each column of the data frames\nden15_na <- sapply(all_columns,\n                 function(col) ifelse(col %in% names(den15),\n                                      na_proportion(den15[[col]]),\n                                      NA))\nden21_na <- sapply(all_columns,\n                 function(col) ifelse(col %in% names(den21),\n                                      na_proportion(den21[[col]]),\n                                      NA))\n\n# Combine the results into a new data frame\nknitr::kable(data.frame(column = all_columns, den15 = den15_na,den21 = den21_na)[24:29,])\n```\n\nFor most variables, the amount of missing values stays similar. However, in the cases of rows 24-44, which coincide with the symptoms, it is noticeable that in 2015 all values are missing, while 98% of the cases in 2021 filled out this variable. This indicates that the variable may have not existed in 2015. It is possible to find two dengue dictionary database version around 2015. One version comes from [2010](https://www.saude.go.gov.br/images/imagens_migradas/upload/arquivos/2013-08/dengue2.pdf) and the other, [2015](http://www.portalsinan.saude.gov.br/images/documentos/Agravos/Dengue/DIC_DADOS_ONLINE.pdf). In the first one, the symptoms variables are not there.\n\n### *Differences between two datasets obtained differently*\n\nAccessing data for the same year, even from the same organization, but via a different method can also lead to a different dataset. Here, the dataset was requested directly via the [e-SIC platform](https://www.gov.br/acessoainformacao/pt-br). <!-- Double check this -->\n\nThe following code cannot be reproduced.\n\n```{r Dengue_loaddbf, echo=FALSE, eval=FALSE}\nden15_dbf <- read.dbf(\"Data/Disease/Dengue/DENGUE_2015.dbf\", as.is=TRUE)\n```\n\nThe two data sets have different number of variables, below a dataframe showcasing the variables that only appear in one of them: There are the same number of registers but differences between the variables.\n\nIf we compare the requested and the downloaded database for the same year?\n\n```{r  Dengue_DifferentMethod, eval=FALSE}\n# compare number of cases\nif (nrow(den15_dbf) == nrow(den15)){\n  print(\"Both datasets have the same number of cases.\")\n} else{\n  print(paste0(\"These documents have different number of cases, the one obtained by ... has\",\n               nrow(den15_dbf), \" cases, while the dataset obtained by microdatasus has \",\n               nrow(den15),\" cases.\"))\n}\n\n# compare variables names\nif (identical(colnames(den15_dbf), colnames(den15))){\n  print(\"Both datsets contain the same columns.\")\n} else{\n  print(paste0(\"The columns that are different are: \",\n               paste(c(setdiff(colnames(den15), colnames(den15_dbf)),\n                       setdiff(colnames(den15_dbf), colnames(den15))), collapse=\", \")))\n}\n\n# Get unique column names from both data frames\nall_columns <- unique(c(names(den15), names(den15_dbf)))\n\n# Function to calculate the proportion of NA values in a column\nna_proportion <- function(col) {\n  round(mean(is.na(col))*100,2)\n}\n\n# Apply the function to each column of the data frames\nden15_na <- sapply(all_columns,\n                 function(col) ifelse(col %in% names(den15),\n                                      na_proportion(den15[[col]]),\n                                      NA))\nden15_dbf_na <- sapply(all_columns,\n                 function(col) ifelse(col %in% names(den15_dbf),\n                                      na_proportion(den15_dbf[[col]]),\n                                      NA))\n\n# Combine the results into a new data frame\nknitr::kable(data.frame(column = all_columns, den15 = den15_na,den15_dbf = den15_dbf_na)[1:10,])\n```\n\n### *Difference depending on when you obtained the data*\n\nNow, lets compare data from the same source for the same year but obtained at different moments in time.\n\n```{r Dengue_DifferentObtainingtime, eval=FALSE}\ndengue21 <- read.dbc(\"Data/Disease/Dengue/DENGBR21.dbc\")\ndengue21_old <- read.dbc(\"Data/Disease/Dengue/DENGBR21_old.dbc\")\n\n# compare number of cases\nif (nrow(dengue21) == nrow(dengue21_old)){\n  print(\"Both datasets have the same number of cases.\")\n} else{\n  print(paste0(\"These documents have different number of cases, the new 2021 dataset has \",\n               nrow(dengue21), \" cases, while the old 2021 dataset has \",\n               nrow(dengue21_old),\" cases.\"))\n}\n\n# compare variables names\nif (identical(colnames(dengue21), colnames(dengue21_old))){\n  print(\"Both datsets contain the same columns.\")\n} else{\n  print(paste0(\"The columns that are different are: \",\n               paste(c(setdiff(colnames(dengue21), colnames(dengue21_old)),\n                       setdiff(colnames(dengue21_old), colnames(dengue21))), collapse=\", \")))\n}\n\n# Get unique column names from both data frames\nall_columns <- unique(c(names(dengue21), names(dengue21_old)))\n\n# Function to calculate the proportion of NA values in a column\nna_proportion <- function(col) {\n  round(mean(is.na(col))*100,2)\n}\n\n# Apply the function to each column of the data frames\ndengue21_na <- sapply(all_columns,\n                 function(col) ifelse(col %in% names(dengue21),\n                                      na_proportion(dengue21[[col]]),\n                                      NA))\ndengue21_old_na <- sapply(all_columns,\n                 function(col) ifelse(col %in% names(dengue21_old),\n                                      na_proportion(dengue21_old[[col]]),\n                                      NA))\n\n# Combine the results into a new data frame\nknitr::kable(data.frame(column = all_columns, dengue21 = dengue21_na,dengue21_old = dengue21_old_na)[65:70,])\n```\n\nIn general the count of NAs throughout the data set is similar, however in rows 66-69, corresponding to the probable areas of infection, the amount changes. In the \"old\" data, there is data registered, however in the newer version this data was removed.\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":"html_document","warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"knitr"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":true,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["styles.css"],"toc":true,"output-file":"brazil_SINAN_SIVEP.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.5.57","editor":"visual","theme":"cosmo","title":"SIVEP_SINAN","author":"Daniela LÃ¼hrsen","date":"2024-10-15"},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}