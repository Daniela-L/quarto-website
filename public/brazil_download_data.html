<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Daniela Luhrsen, Rachel Lowe and Raquel Lana">
<meta name="dcterms.date" content="2022-11-21">

<title>0_Download – data4health</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./images/harmonize_logo.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">data4health</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-instructions" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Instructions</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-instructions">    
        <li class="dropdown-header">Brazil</li>
        <li>
    <a class="dropdown-item" href="./brazil_download_data.html">
 <span class="dropdown-text">Download data</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./brazil_dengue.html">
 <span class="dropdown-text">Dengue</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./brazil_malaria.html">
 <span class="dropdown-text">Malaria</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">Colombia</li>
        <li>
    <a class="dropdown-item" href="./colombia_lepto.qmd">
 <span class="dropdown-text">Leptospirosis</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./colombia_dengue.html">
 <span class="dropdown-text">Dengue</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">Dominican Republic</li>
        <li>
    <a class="dropdown-item" href="./domrep_malaria.html">
 <span class="dropdown-text">Malaria</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./domrep_dengue.html">
 <span class="dropdown-text">Dengue</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">Peru</li>
        <li>
    <a class="dropdown-item" href="./peru_dengue.html">
 <span class="dropdown-text">Dengue</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-reports" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Reports</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-reports">    
        <li class="dropdown-header">Brazil</li>
        <li>
    <a class="dropdown-item" href="./brazil_report_public.qmd">
 <span class="dropdown-text">General public report</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./brazil_report_technical.qmd">
 <span class="dropdown-text">Technical report</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">Colombia</li>
        <li>
    <a class="dropdown-item" href="./colombia_report_public.qmd">
 <span class="dropdown-text">General public report</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./colombia_report_technical.qmd">
 <span class="dropdown-text">Technical report</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">Dominican Republic</li>
        <li>
    <a class="dropdown-item" href="./domrep_report_public.qmd">
 <span class="dropdown-text">General public report</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./domrep_report_technical.qmd">
 <span class="dropdown-text">Technical report</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">Peru</li>
        <li>
    <a class="dropdown-item" href="./peru_report_public.qmd">
 <span class="dropdown-text">General public report</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./peru_report_technical.qmd">
 <span class="dropdown-text">Technical report</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="./ui_tool.html"> 
<span class="menu-text">No-coding tool</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./brazil.html">Brazil</a></li><li class="breadcrumb-item"><a href="./brazil_download_data.html">Download data</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
  <div id="quarto-announcement" data-announcement-id="1b4e9b07bc2c0b211b44cc4b05a9f2bf" class="alert alert-primary hidden"><i class="bi bi-info-circle quarto-announcement-icon"></i><div class="quarto-announcement-content">
<p><strong>Alert</strong> - The person reading this announcement is very pretty.</p>
</div><i class="bi bi-x-lg quarto-announcement-action"></i></div>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./brazil.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Brazil</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./brazil_download_data.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Download data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./brazil_dengue.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Dengue</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./brazil_malaria.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Malaria</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./colombia.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Colombia</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./colombia_lepto.qmd" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Leptospirosis</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./colombia_dengue.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Dengue</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./domrep.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Dominican Republic</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./domrep_malaria.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Malaria</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./domrep_dengue.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Dengue</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./peru.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Peru</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./peru_dengue.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Dengue</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#how-to-download-health-data" id="toc-how-to-download-health-data" class="nav-link active" data-scroll-target="#how-to-download-health-data">How to download Health Data</a></li>
  <li><a href="#how-to-download-other-data" id="toc-how-to-download-other-data" class="nav-link" data-scroll-target="#how-to-download-other-data">How to download other data</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./brazil.html">Brazil</a></li><li class="breadcrumb-item"><a href="./brazil_download_data.html">Download data</a></li></ol></nav>
<div class="quarto-title">
<h1 class="title">0_Download</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Daniela </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">2022-11-21</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="how-to-download-health-data" class="level1">
<h1>How to download Health Data</h1>
<p>Here you can find four different ways to download the anonymised raw health Brazilian data. If you do not need the raw data, you can access the <a href="https://datasus.saude.gov.br/informacoes-de-saude-tabnet/">DataSUS tabnet</a> webpage and customise tables as you need it.</p>
<p>Depending on the disease, the available date changes because of the year the disease was introduced and / or started the notification and / or became a mandatory disease notification in Brazil. The minimum year available on SINAN FTP link is 2000. The minimum year available on SIVEP is 2003. If you need years before it and / or nominal data and data from SIVEP, you have to request to the Ministry of Health on the <a href="https://esic.cfp.org.br/sistema/site/index.html?ReturnUrl=%2fsistema">e-SIC portal</a>. Nominal data require ethical committee approval in most of the cases.</p>
<hr>
<section id="using-microdatasus" class="level4">
<h4 class="anchored" data-anchor-id="using-microdatasus">Using microdatasus</h4>
<hr>
<p><a href="https://www.scielo.br/j/csp/a/gdJXqcrW5PPDHX8rwPDYL7F/abstract/?lang=en">Microdatasus</a> is an <a href="https://github.com/rfsaldanha/microdatasus">R package</a> developed to download and preprocess data from the department of informatic of the Unified Health System (DATASUS). It can be installed and loaded with the following commands in R:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="st">"devtools"</span> <span class="sc">%in%</span> <span class="fu">installed.packages</span>()) { <span class="fu">install.packages</span>(<span class="st">"devtools"</span>) }</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(devtools)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="st">"microdatasus"</span> <span class="sc">%in%</span> <span class="fu">installed.packages</span>()){ devtools<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">"rfsaldanha/microdatasus"</span>) }</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(microdatasus)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The microdatasus package has two main functions: downloading data and pre-processing it. The function to download data is “fetch_datasus”, and one needs to specify:</p>
<ol type="1">
<li>The temporal extent of the data: via year_start, month_start, year_end and month_end.</li>
<li>The spatial extent: by specifying the federative units.</li>
<li>The disease: by selecting the health information system.</li>
<li>The variables: default is downloading every variable.</li>
</ol>
<p>Here a few examples:<br>
Observation: SINAN malaria has data for Extra-Amazon region.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>chik     <span class="ot">&lt;-</span>    <span class="fu">fetch_datasus</span>(<span class="at">year_start =</span> <span class="dv">2017</span>, <span class="at">year_end =</span> <span class="dv">2019</span>, <span class="at">information_system =</span> <span class="st">"SINAN-CHIKUNGUNYA"</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>mal      <span class="ot">&lt;-</span>    <span class="fu">fetch_datasus</span>(<span class="at">year_start =</span> <span class="dv">2004</span>, <span class="at">year_end =</span> <span class="dv">2006</span>, <span class="at">information_system =</span> <span class="st">"SINAN-MALARIA"</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>den      <span class="ot">&lt;-</span>    <span class="fu">fetch_datasus</span>(<span class="at">year_start =</span> <span class="dv">2011</span>, <span class="at">year_end =</span> <span class="dv">2011</span>, <span class="at">information_system =</span> <span class="st">"SINAN-DENGUE"</span>)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>zika     <span class="ot">&lt;-</span>    <span class="fu">fetch_datasus</span>(<span class="at">year_start =</span> <span class="dv">2016</span>, <span class="at">year_end =</span> <span class="dv">2021</span>, <span class="at">information_system =</span> <span class="st">"SINAN-ZIKA"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The second functionality of this package is to preprocess the datasets. This includes the following steps:</p>
<ul>
<li>Assigning labels to categorical fields, eg CS_RACA goes from (1,2,3,…) to (Branca (White), Preta (Black), Amarela (Yellow),…)</li>
<li>Converts each variable to its correct format, eg. from factor to character.</li>
<li>Simplifying the age variable by changing the NU_IDADE_N field into IDADEminutos, IDADEhoras, IDADEdias, IDADEmeses and IDADEanos.</li>
</ul>
<p>Since the datasets of all loaded diseases are different, the package has distinct function for all of them.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>chik2 <span class="ot">&lt;-</span> <span class="fu">process_sinan_chikungunya</span>(chik)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>mal2  <span class="ot">&lt;-</span> <span class="fu">process_sinan_malaria</span>(mal)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>den2  <span class="ot">&lt;-</span> <span class="fu">process_sinan_dengue</span>(den)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>zika2 <span class="ot">&lt;-</span> <span class="fu">process_sinan_zika</span>(zika)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
</section>
<section id="using-filezilla" class="level4">
<h4 class="anchored" data-anchor-id="using-filezilla">Using Filezilla</h4>
<hr>
<p>SINAN has File Transfer Protocol (FTP) link to download data directly. For this, it is necessary to use a FTP application like FileZilla.</p>
<p>The host link is <a href="ftp.datasus.gov.br">ftp.datasus.gov.br</a> and the remote site is <a href="./dissemin/publicos/SINAN/">/dissemin/publicos/SINAN/</a>. Once the connection is established, the correct folder will appear on the screen. Inside of the “DADOS” folder, there are two folders: “FINAIS” and “PRELIM”. The “FINAIS” folder contains all the revised historical data, while “PRELIM” contains the non-revised raw data of the last year(s). Both are organized by disease and year. If a database is available on “FINAIS”, it means this is not available on “PRELIM”. <img src="images/Filezilla_SINAN.png" class="img-fluid" alt="Filezilla"></p>
<hr>
</section>
<section id="using-datasus-website-commandline" class="level4">
<h4 class="anchored" data-anchor-id="using-datasus-website-commandline">Using Datasus website + commandline</h4>
<hr>
<p>The Ministry of Health provides a <a href="https://datasus.saude.gov.br/transferencia-de-arquivos/">website</a> to search for and download files. Enter the page and fill in the following:</p>
<ul>
<li>Source (Fonte): SINAN - Sistema de Informaçoes de Agravos de Notificaçao</li>
<li>Modalidade: Dados</li>
<li>Tipo de Arquivo: Select the disease of your interest</li>
<li>Ano: Select your desired years</li>
<li>UF: BR</li>
</ul>
<p>And then click on “enviar”. A list with all selected data files will appear. Clicking on the files, a pop up will appear asking you to choose which program should be used to open the link. If you have a FTP program which accepts FTP links with the filename in the url you can select it (FileZilla does not support this). Otherwise, you can right click on the file, copy the link address and go to the command line to write the following:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">wget</span> ftp://ftp.datasus.gov.br/dissemin/publicos/SINAN/DADOS/PRELIM/DENGBR21.dbc <span class="at">-P</span> Path/where/you/want/to/save/</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<hr>
</section>
<section id="using-pysus-package" class="level4">
<h4 class="anchored" data-anchor-id="using-pysus-package">Using PySUS package</h4>
<hr>
<p>The PySUS package was developed to directly download data from Python. The package can be downloaded using the following commands in the terminal:</p>
<div class="cell" data-python.reticulate="false">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>sudo apt install libffi<span class="op">-</span>dev</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>sudo pip install PySUS</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>pip install geocoder</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Then, a file path for the loaded data has to be established. The following can either be typed into the command line each time before or written into the <code>~/.bashrc</code> file for a permanent setting.</p>
<div class="cell" data-python.reticulate="false">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>export PYSUS_CACHEPATH<span class="op">=</span><span class="st">"/home/me/desired/path/.pysus"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Then, within python, the data can be loaded and explored with the following lines of code.</p>
<div class="cell" data-python.reticulate="false">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pysus.preprocessing.sinan <span class="im">import</span> SINAN</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>SINAN.list_diseases()</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>SINAN.get_available_years(<span class="st">'zika'</span>)</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> SINAN.download(<span class="dv">2019</span>,<span class="st">'Zika'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Downloaded files can be found as parquet files in the folder that was defined above. Further functions can be seen in the <a href="https://pysus.readthedocs.io/en/latest/SINAN.html">guide</a>.</p>
</section>
</section>
<section id="how-to-download-other-data" class="level1">
<h1>How to download other data</h1>
<hr>
<section id="shapefiles" class="level4">
<h4 class="anchored" data-anchor-id="shapefiles">Shapefiles</h4>
<hr>
</section>
<section id="manually-download-the-data" class="level4">
<h4 class="anchored" data-anchor-id="manually-download-the-data"><em>Manually Download the data</em></h4>
<p>Shapefiles with polygons of Brazilian regions, states, municipalities and other administrative levels can be downloaded directly from the geoftp from Brazil Institute for geography and Statistics (IBGE). In this <a href="https://geoftp.ibge.gov.br/organizacao_do_territorio/malhas_territoriais/malhas_municipais/">link</a> you can select the year, the region (or the whole country) and the spatial resolution (municipality/microregion, mesoregion, regions, Federal units, country) that you want to dowload as a zip file.</p>
<p>Another option is to use the IBGE directly <a href="https://www.ibge.gov.br/geociencias/organizacao-do-territorio/malhas-territoriais/15774-malhas.html?=&amp;t=acesso-ao-produto">IBGE</a> <!--- 
DL: @Raquel, do you know if there is a difference between these datasets?
TO DO: Also, It's important to inform the other possibilities of data as census tract, etc. But for the census, I think the best is to do in the socioeconomic data training section. ---></p>
</section>
<section id="local-function" class="level4">
<h4 class="anchored" data-anchor-id="local-function"><em>Local function</em></h4>
<ul>
<li>level: (required) what administrative level, either municipality “muni” or “UF”</li>
<li>year: (required) Year of municipalities, starting from 2015</li>
<li>outfile: The path and name of where you want to store it</li>
<li>load: Should the population data be loaded into the environment? Default is TRUE</li>
<li>save: Should the population data be saved on the local disk? Default is TRUE</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_br_adm_data</span>(<span class="st">"UF"</span>, <span class="dv">2015</span>, <span class="at">load=</span><span class="cn">TRUE</span>, <span class="at">save=</span><span class="cn">FALSE</span>)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">get_br_adm_data</span>(<span class="st">"UF"</span>, <span class="dv">2020</span>, <span class="st">"Data/BR_muni.shp"</span>, <span class="at">load=</span><span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="geobr-package" class="level4">
<h4 class="anchored" data-anchor-id="geobr-package"><em>Geobr package</em></h4>
<p>Administrative shapefiles can also be loaded directly in R through the package <a href="https://github.com/ipeaGIT/geobr">geobr</a>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="st">"devtools"</span> <span class="sc">%in%</span> <span class="fu">installed.packages</span>()) { <span class="fu">install.packages</span>(<span class="st">"devtools"</span>) }</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(devtools)</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="st">"geobr"</span> <span class="sc">%in%</span> <span class="fu">installed.packages</span>()){ <span class="fu">install.packages</span>(<span class="st">"geobr"</span>) }</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(geobr)</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>mun <span class="ot">&lt;-</span> <span class="fu">read_municipality</span>(<span class="at">code_muni=</span><span class="st">"all"</span>, <span class="at">year=</span><span class="dv">2018</span>)</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>mun <span class="ot">&lt;-</span> <span class="fu">read_municipality</span>(<span class="at">code_muni=</span><span class="st">"RJ"</span>, <span class="at">year=</span><span class="dv">2010</span>)</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>mun <span class="ot">&lt;-</span> <span class="fu">read_municipality</span>(<span class="at">code_muni=</span><span class="dv">1200179</span>, <span class="at">year=</span><span class="dv">2017</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Municipality codes have 6 numbers. The first number indicates the region of Brazil, the second number indicates the state, and the remaining 4 numbers indicate the municipality. If, like in the geobr dataset, the municipality code has 7 numbers, the last one needs to be excluded.</p>
<hr>
</section>
<section id="population-data" class="level4">
<h4 class="anchored" data-anchor-id="population-data">Population Data</h4>
<hr>
<p>Population estimates for each municipality can be downloaded from the IBGE (Brazilian Institute of Geography and Statistics). <a href="https://www.ibge.gov.br/estatisticas/sociais/populacao/9103-estimativas-de-populacao.html?=&amp;t=resultados">Here</a> is the data for 2021. Earlier years can be downloaded from <a href="https://www.ibge.gov.br/estatisticas/sociais/populacao/9103-estimativas-de-populacao.html?edicao=17283&amp;t=downloads">here</a>. Alternatively, you can use the internal function below to select the desired year:</p>
<ul>
<li>year: selected year(s) for which the population data should be downloaded (check available years first)</li>
<li>outpath: Where should the population csv be saved? Only needed if “save” is TRUE</li>
<li>load: Should the population data be loaded into the environment? Default is TRUE</li>
<li>save: Should the population data be saved on the local disk? Default is TRUE</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_br_pop_data</span>(<span class="dv">2015</span>, <span class="st">"Data/Demographic/"</span>)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">get_br_pop_data</span>(<span class="dv">2016</span>, <span class="st">"Data/Demographic/"</span>, <span class="at">load=</span>F)</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="fu">get_br_pop_data</span>(<span class="dv">2017</span>, <span class="at">save=</span>F)</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="fu">get_br_pop_data</span>(<span class="fu">c</span>(<span class="dv">2018</span>,<span class="dv">2019</span>), <span class="at">save=</span>F)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
</section>
<section id="administrative-units-inside-amazonia-legal" class="level4">
<h4 class="anchored" data-anchor-id="administrative-units-inside-amazonia-legal">Administrative units inside Amazonia legal</h4>
<hr>
<p>The list of municipalities that lay within the legal amazonia can be downloaded from <a href="https://www.ibge.gov.br/geociencias/cartas-e-mapas/mapas-regionais/15819-amazonia-legal.html?=&amp;t=acesso-ao-produto">IBGE</a> with the following internal function:</p>
<ul>
<li>percentage: (optional) What percentage of the municipality should be inside the amazonia legal for it to be included? (defaults to 50)</li>
<li>outfile: How should the list of municipalities codes be named?</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_amazon_adm</span>(<span class="at">outfile=</span><span class="st">"Data/AmazoniaLegal.csv"</span>)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">get_amazon_adm</span>(<span class="dv">20</span>, <span class="st">"Data/AmazoniaLegal.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
          // target, if specified
          link.setAttribute("target", "_blank");
          if (link.getAttribute("rel") === null) {
            link.setAttribute("rel", "noopener");
          }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Daniela Lührsen, HARMONIZE</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/" target="_blank">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/" target="_blank">
      <i class="bi bi-twitter" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>




</body></html>